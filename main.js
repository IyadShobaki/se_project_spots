!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitBtnSelector:".modal__submit-btn",inactiveBtnClass:"modal__btn_disabled",inputErrorClass:"modal__input_type_error"},t=(e,t,r)=>{const n=e.querySelector(`.${t.id}-error`);t.classList.remove(r.inputErrorClass),n.textContent=""},r=(e,t,r)=>{(e=>e.some(e=>!e.validity.valid))(e)?(t.classList.add(r.inactiveBtnClass),t.disabled=!0):(t.classList.remove(r.inactiveBtnClass),t.disabled=!1)};function n(e,t){const r=e.textContent.trim();e.textContent=t?r.slice(0,-1)+"ing...":r.slice(0,-6)+"e"}const o=new class{constructor({baseUrl:e,headers:t}){this._baseUrl=e,this._headers=t}getAppInfo(){return Promise.all([this.getInitalCards(),this.getUserInfo()])}_request(e,t){return fetch(e,t).then(this._checkResponse)}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitalCards(){return this._request(`${this._baseUrl}/cards`,{method:"GET",headers:this._headers})}getUserInfo(){return this._request(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers})}editUserInfo({name:e,about:t}){return this._request(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})})}editAvatar(e){return this._request(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})})}createNewCard({name:e,link:t}){return this._request(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})})}deleteCard(e){return this._request(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers})}toggleLike(e,t){return this._request(`${this._baseUrl}/cards/${e}/likes`,{method:t?"DELETE":"PUT",headers:this._headers})}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"3deb5cb0-25cc-41a0-b81d-23c312c12744","Content-Type":"application/json"}});let s;function a(){s.forEach(e=>{const t=function(e){const t=M.cloneNode(!0),r=t.querySelector(".card__title"),n=t.querySelector(".card__image");n.src=e.link,n.setAttribute("alt",e.name),r.textContent=e.name;const i=t.querySelector(".card__like-btn");e.isLiked&&i.classList.add("card__like-btn_active"),i.addEventListener("click",t=>function(e,t){o.toggleLike(t._id,t.isLiked).then(e=>{const r=s.findIndex(e=>e._id===t._id);s[r]=e,H.innerHTML="",a()}).catch(console.error)}(0,e));return t.querySelector(".card__delete-btn").addEventListener("click",()=>function(e,t){N=e,P=t._id,console.log(P),O(B)}(t,e)),n.addEventListener("click",()=>{w.textContent=e.name,I.src=e.link,I.alt=e.name,O($)}),t}(e);H.append(t)})}o.getAppInfo().then(([e,t])=>{s=e,a(),q.textContent=t.name,L.textContent=t.about,_.src=t.avatar}).catch(console.error);const i=document.querySelector(".profile__avatar-btn"),c=document.querySelector("#avatar-modal"),l=c.querySelector(".modal__close-btn"),d=c.querySelector(".modal__form"),u=c.querySelector(".modal__submit-btn"),m=c.querySelector("#profile-avatar-input"),_=document.querySelector(".profile__avatar"),h=document.querySelector(".profile__edit-btn"),f=document.querySelector("#edit-profile-modal"),y=f.querySelector(".modal__close-btn"),v=f.querySelector(".modal__submit-btn"),p=f.querySelector(".modal__form"),b=f.querySelector("#profile-name-input"),S=f.querySelector("#profile-description-input"),q=document.querySelector(".profile__title"),L=document.querySelector(".profile__description"),E=document.querySelector(".profile__new-post-btn"),k=document.querySelector("#new-post-modal"),C=k.querySelector(".modal__close-btn"),g=k.querySelector(".modal__submit-btn"),U=k.querySelector(".modal__form"),x=k.querySelector("#card-image-input"),T=k.querySelector("#card-caption-input"),$=document.querySelector("#preview-image-modal"),A=$.querySelector(".modal__close-btn"),I=$.querySelector(".modal__image"),w=$.querySelector(".modal__caption"),B=document.querySelector("#confirmation-modal"),D=B.querySelector(".modal__form");let N,P;const H=document.querySelector(".cards__list"),M=document.querySelector("#card-template").content.querySelector(".card");function O(e){e.classList.add("modal_is-opened"),document.addEventListener("keyup",J),e.addEventListener("mousedown",V)}function j(e){e.classList.remove("modal_is-opened"),document.removeEventListener("keyup",J),e.removeEventListener("mousedown",V)}function J(e){"Escape"===e.key&&j(document.querySelector(".modal_is-opened"))}function V(e){e.target.classList.contains("modal")&&j(e.target)}var G;A.addEventListener("click",()=>{j($)}),h.addEventListener("click",function(){b.value=q.textContent,S.value=L.textContent,t(f,b,e),t(f,S,e),O(f)}),p.addEventListener("submit",function(t){if(!p.checkValidity())return;t.preventDefault();const r=t.submitter;n(r,!0),o.editUserInfo({name:b.value,about:S.value}).then(t=>{q.textContent=t.name,L.textContent=t.about,v.classList.add(e.inactiveBtnClass),j(f)}).catch(console.error).finally(()=>{n(r,!1)})}),y.addEventListener("click",function(){j(f)}),E.addEventListener("click",function(){O(k)}),U.addEventListener("submit",function(t){if(!U.checkValidity())return;t.preventDefault();const r=t.submitter;n(r,!0),o.createNewCard({name:T.value,link:x.value}).then(r=>{r.name,r.link,s.unshift(r),H.innerHTML="",a(),g.classList.add(e.inactiveBtnClass),t.target.reset(),j(k)}).catch(console.error).finally(()=>{n(r,!1)})}),C.addEventListener("click",function(){j(k)}),i.addEventListener("click",()=>{O(c)}),d.addEventListener("submit",function(t){if(!d.checkValidity())return;t.preventDefault();const r=t.submitter;n(r,!0),o.editAvatar(m.value).then(r=>{_.src=r.avatar,u.classList.add(e.inactiveBtnClass),t.target.reset(),j(c)}).catch(console.error).finally(()=>{n(r,!1)})}),l.addEventListener("click",()=>{j(c)}),D.addEventListener("submit",function(e){e.preventDefault();const t=e.submitter;n(t,!0),o.deleteCard(P).then(()=>{const e=s.findIndex(e=>e._id===P);s.splice(e,1),H.innerHTML="",a(),N="",P="",j(B)}).catch(console.error).finally(()=>{n(t,!1)})}),B.addEventListener("mousedown",e=>{(e.target.classList.contains("modal__close-btn")||e.target.classList.contains("modale__submit-btn_type_cancel"))&&(N="",P="",j(B))}),G=e,document.querySelectorAll(G.formSelector).forEach(e=>{((e,n)=>{const o=Array.from(e.querySelectorAll(n.inputSelector)),s=e.querySelector(n.submitBtnSelector);r(o,s,n),o.forEach(a=>{a.addEventListener("input",()=>{((e,r,n)=>{r.validity.valid?t(e,r,n):((e,t,r,n)=>{const o=e.querySelector(`.${t.id}-error`);t.classList.add(n.inputErrorClass),o.textContent=r})(e,r,r.validationMessage,n)})(e,a,n),r(o,s,n)})})})(e,G)})}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBQU8sTUFBTUEsRUFBVyxDQUN0QkMsYUFBYyxlQUNkQyxjQUFlLGdCQUNmQyxrQkFBbUIscUJBQ25CQyxpQkFBa0Isc0JBQ2xCQyxnQkFBaUIsMkJBU05DLEVBQWlCQSxDQUFDQyxFQUFhQyxFQUFjQyxLQUN4RCxNQUFNQyxFQUFlSCxFQUFZSSxjQUFjLElBQUlILEVBQWFJLFlBQ2hFSixFQUFhSyxVQUFVQyxPQUFPTCxFQUFPSixpQkFDckNLLEVBQWFLLFlBQWMsSUFzQnZCQyxFQUFpQkEsQ0FBQ0MsRUFBV0MsRUFBWVQsS0FOdEJRLElBQ2hCQSxFQUFVRSxLQUFNWCxJQUNiQSxFQUFhWSxTQUFTQyxPQUs1QkMsQ0FBZ0JMLElBQ2xCQyxFQUFXTCxVQUFVVSxJQUFJZCxFQUFPTCxrQkFDaENjLEVBQVdNLFVBQVcsSUFFdEJOLEVBQVdMLFVBQVVDLE9BQU9MLEVBQU9MLGtCQUNuQ2MsRUFBV00sVUFBVyxJQzdDbkIsU0FBU0MsRUFBY0MsRUFBS0MsR0FDakMsTUFBTUMsRUFBT0YsRUFBSVgsWUFBWWMsT0FHeEJILEVBQUlYLFlBRFRZLEVBQ3VCQyxFQUFLRSxNQUFNLEdBQUksR0FBSyxTQUNwQkYsRUFBS0UsTUFBTSxHQUFJLEdBQUssR0FDN0MsQ0NJQSxNQUFNQyxFQUFNLElDVlosTUFDRUMsV0FBQUEsRUFBWSxRQUFFQyxFQUFPLFFBQUVDLElBQ3JCQyxLQUFLQyxTQUFXSCxFQUNoQkUsS0FBS0UsU0FBV0gsQ0FDbEIsQ0FFQUksVUFBQUEsR0FDRSxPQUFPQyxRQUFRQyxJQUFJLENBQUNMLEtBQUtNLGlCQUFrQk4sS0FBS08sZUFDbEQsQ0FFQUMsUUFBQUEsQ0FBU0MsRUFBS0MsR0FDWixPQUFPQyxNQUFNRixFQUFLQyxHQUFTRSxLQUFLWixLQUFLYSxlQUN2QyxDQUVBQSxjQUFBQSxDQUFlQyxHQUNiLE9BQUlBLEVBQUlDLEdBQ0NELEVBQUlFLE9BRU5aLFFBQVFhLE9BQU8sVUFBVUgsRUFBSUksU0FDdEMsQ0FFQVosY0FBQUEsR0FDRSxPQUFPTixLQUFLUSxTQUFTLEdBQUdSLEtBQUtDLGlCQUFrQixDQUM3Q2tCLE9BQVEsTUFDUnBCLFFBQVNDLEtBQUtFLFVBRWxCLENBRUFLLFdBQUFBLEdBQ0UsT0FBT1AsS0FBS1EsU0FBUyxHQUFHUixLQUFLQyxvQkFBcUIsQ0FDaERrQixPQUFRLE1BQ1JwQixRQUFTQyxLQUFLRSxVQUVsQixDQUVBa0IsWUFBQUEsRUFBYSxLQUFFQyxFQUFJLE1BQUVDLElBQ25CLE9BQU90QixLQUFLUSxTQUFTLEdBQUdSLEtBQUtDLG9CQUFxQixDQUNoRGtCLE9BQVEsUUFDUnBCLFFBQVNDLEtBQUtFLFNBQ2RxQixLQUFNQyxLQUFLQyxVQUFVLENBQ25CSixPQUNBQyxXQUdOLENBRUFJLFVBQUFBLENBQVdDLEdBQ1QsT0FBTzNCLEtBQUtRLFNBQVMsR0FBR1IsS0FBS0MsMkJBQTRCLENBQ3ZEa0IsT0FBUSxRQUNScEIsUUFBU0MsS0FBS0UsU0FDZHFCLEtBQU1DLEtBQUtDLFVBQVUsQ0FDbkJHLE9BQVFELEtBR2QsQ0FFQUUsYUFBQUEsRUFBYyxLQUFFUixFQUFJLEtBQUVNLElBQ3BCLE9BQU8zQixLQUFLUSxTQUFTLEdBQUdSLEtBQUtDLGlCQUFrQixDQUM3Q2tCLE9BQVEsT0FDUnBCLFFBQVNDLEtBQUtFLFNBQ2RxQixLQUFNQyxLQUFLQyxVQUFVLENBQ25CSixPQUNBTSxVQUdOLENBRUFHLFVBQUFBLENBQVdDLEdBQ1QsT0FBTy9CLEtBQUtRLFNBQVMsR0FBR1IsS0FBS0Msa0JBQWtCOEIsSUFBVSxDQUN2RFosT0FBUSxTQUNScEIsUUFBU0MsS0FBS0UsVUFFbEIsQ0FFQThCLFVBQUFBLENBQVdELEVBQVFFLEdBQ2pCLE9BQU9qQyxLQUFLUSxTQUFTLEdBQUdSLEtBQUtDLGtCQUFrQjhCLFVBQWdCLENBQzdEWixPQUFRYyxFQUFVLFNBQVcsTUFDN0JsQyxRQUFTQyxLQUFLRSxVQUVsQixHRHJFa0IsQ0FDbEJKLFFBQVMsa0RBQ1RDLFFBQVMsQ0FDUG1DLGNBQWUsdUNBQ2YsZUFBZ0Isc0JBS3BCLElBQUlDLEVBRUosU0FBU0MsSUFDUEQsRUFBV0UsUUFBU0MsSUFDbEIsTUFBTUMsRUEwRVYsU0FBd0JDLEdBQ3RCLE1BQU1ELEVBQWNFLEVBQWFDLFdBQVUsR0FFckNDLEVBQVlKLEVBQVkvRCxjQUFjLGdCQUN0Q29FLEVBQWdCTCxFQUFZL0QsY0FBYyxnQkFFaERvRSxFQUFjQyxJQUFNTCxFQUFLYixLQUN6QmlCLEVBQWNFLGFBQWEsTUFBT04sRUFBS25CLE1BQ3ZDc0IsRUFBVS9ELFlBQWM0RCxFQUFLbkIsS0FFN0IsTUFBTTBCLEVBQWNSLEVBQVkvRCxjQUFjLG1CQUMxQ2dFLEVBQUtQLFNBQVNjLEVBQVlyRSxVQUFVVSxJQUFJLHlCQUM1QzJELEVBQVlDLGlCQUFpQixRQUFVQyxHQThNekMsU0FBNEJBLEVBQUtULEdBRS9CNUMsRUFDR29DLFdBQVdRLEVBQUtVLElBQUtWLEVBQUtQLFNBQzFCckIsS0FBTXVDLElBQ0wsTUFBTUMsRUFBUWpCLEVBQVdrQixVQUFXZixHQUFTQSxFQUFLWSxNQUFRVixFQUFLVSxLQUUvRGYsRUFBV2lCLEdBQVNELEVBQ3BCRyxFQUFVQyxVQUFZLEdBQ3RCbkIsTUFHRG9CLE1BQU1DLFFBQVFDLE1BQ25CLENBM05pREMsQ0FBbUJWLEVBQUtULElBY3ZFLE9BWnNCRCxFQUFZL0QsY0FBYyxxQkFDbEN3RSxpQkFBaUIsUUFBUyxJQStKMUMsU0FBOEJULEVBQWFDLEdBQ3pDb0IsRUFBZXJCLEVBQ2ZzQixFQUFpQnJCLEVBQUtVLElBQ3RCTyxRQUFRSyxJQUFJRCxHQUNaRSxFQUFVQyxFQUNaLENBbktJQyxDQUFxQjFCLEVBQWFDLElBR3BDSSxFQUFjSSxpQkFBaUIsUUFBUyxLQUN0Q2tCLEVBQW9CdEYsWUFBYzRELEVBQUtuQixLQUN2QzhDLEVBQWF0QixJQUFNTCxFQUFLYixLQUN4QndDLEVBQWFDLElBQU01QixFQUFLbkIsS0FDeEIwQyxFQUFVTSxLQUdMOUIsQ0FDVCxDQXJHd0IrQixDQUFlaEMsR0FDbkNnQixFQUFVaUIsT0FBT2hDLElBRXJCLENBQ0EzQyxFQUNHTyxhQUNBUyxLQUFLLEVBQUU0RCxFQUFPQyxNQUNidEMsRUFBYXFDLEVBQ2JwQyxJQUNBc0MsRUFBZTlGLFlBQWM2RixFQUFLcEQsS0FDbENzRCxFQUFxQi9GLFlBQWM2RixFQUFLbkQsTUFDeENzRCxFQUFnQi9CLElBQU00QixFQUFLN0MsU0FFNUI0QixNQUFNQyxRQUFRQyxPQUdqQixNQUFNbUIsRUFBZ0JDLFNBQVN0RyxjQUFjLHdCQUN2Q3VHLEVBQWtCRCxTQUFTdEcsY0FBYyxpQkFDekN3RyxFQUFxQkQsRUFBZ0J2RyxjQUFjLHFCQUNuRHlHLEVBQWlCRixFQUFnQnZHLGNBQWMsZ0JBQy9DMEcsRUFBc0JILEVBQWdCdkcsY0FBYyxzQkFDcEQyRyxFQUFrQkosRUFBZ0J2RyxjQUFjLHlCQUNoRG9HLEVBQWtCRSxTQUFTdEcsY0FBYyxvQkFHekM0RyxFQUFpQk4sU0FBU3RHLGNBQWMsc0JBQ3hDNkcsRUFBbUJQLFNBQVN0RyxjQUFjLHVCQUMxQzhHLEVBQXNCRCxFQUFpQjdHLGNBQWMscUJBQ3JEK0csRUFDSkYsRUFBaUI3RyxjQUFjLHNCQUMzQmdILEVBQWtCSCxFQUFpQjdHLGNBQWMsZ0JBQ2pEaUgsRUFBdUJKLEVBQWlCN0csY0FDNUMsdUJBRUlrSCxFQUE4QkwsRUFBaUI3RyxjQUNuRCw4QkFHSWtHLEVBQWlCSSxTQUFTdEcsY0FBYyxtQkFDeENtRyxFQUF1QkcsU0FBU3RHLGNBQWMseUJBRzlDbUgsRUFBYWIsU0FBU3RHLGNBQWMsMEJBQ3BDb0gsRUFBZWQsU0FBU3RHLGNBQWMsbUJBQ3RDcUgsRUFBa0JELEVBQWFwSCxjQUFjLHFCQUM3Q3NILEVBQW1CRixFQUFhcEgsY0FBYyxzQkFDOUN1SCxFQUFjSCxFQUFhcEgsY0FBYyxnQkFDekN3SCxFQUNKSixFQUFhcEgsY0FBYyxxQkFDdkJ5SCxFQUEwQkwsRUFBYXBILGNBQzNDLHVCQUlJNkYsRUFBb0JTLFNBQVN0RyxjQUFjLHdCQUMzQzBILEVBQ0o3QixFQUFrQjdGLGNBQWMscUJBQzVCMkYsRUFBZUUsRUFBa0I3RixjQUFjLGlCQUMvQzBGLEVBQXNCRyxFQUFrQjdGLGNBQWMsbUJBSXREd0YsRUFBb0JjLFNBQVN0RyxjQUFjLHVCQUMzQzJILEVBQW9CbkMsRUFBa0J4RixjQUFjLGdCQUUxRCxJQUFJb0YsRUFBY0MsRUFHbEIsTUFBTVAsRUFBWXdCLFNBQVN0RyxjQUFjLGdCQUVuQ2lFLEVBQWVxQyxTQUNsQnRHLGNBQWMsa0JBQ2Q0SCxRQUFRNUgsY0FBYyxTQW9DekIsU0FBU3VGLEVBQVVzQyxHQUNqQkEsRUFBTTNILFVBQVVVLElBQUksbUJBQ3BCMEYsU0FBUzlCLGlCQUFpQixRQUFTc0QsR0FDbkNELEVBQU1yRCxpQkFBaUIsWUFBYXVELEVBQ3RDLENBRUEsU0FBU0MsRUFBV0gsR0FDbEJBLEVBQU0zSCxVQUFVQyxPQUFPLG1CQUN2Qm1HLFNBQVMyQixvQkFBb0IsUUFBU0gsR0FDdENELEVBQU1JLG9CQUFvQixZQUFhRixFQUN6QyxDQUVBLFNBQVNELEVBQWNyRCxHQUNMLFdBQVpBLEVBQUl5RCxLQUVORixFQURjMUIsU0FBU3RHLGNBQWMsb0JBR3pDLENBRUEsU0FBUytILEVBQW9CdEQsR0FDdkJBLEVBQUkwRCxPQUFPakksVUFBVWtJLFNBQVMsVUFDaENKLEVBQVd2RCxFQUFJMEQsT0FFbkIsQ0Z6RmlDckksTUU2RGpDNEgsRUFBcUJsRCxpQkFBaUIsUUFBUyxLQUM3Q3dELEVBQVduQyxLQStCYmUsRUFBZXBDLGlCQUFpQixRQUFTLFdBQ3ZDeUMsRUFBcUJvQixNQUFRbkMsRUFBZTlGLFlBQzVDOEcsRUFBNEJtQixNQUFRbEMsRUFBcUIvRixZQUN6RFQsRUFBZWtILEVBQWtCSSxFQUFzQjVILEdBQ3ZETSxFQUFla0gsRUFBa0JLLEVBQTZCN0gsR0FDOURrRyxFQUFVc0IsRUFDWixHQTBCQUcsRUFBZ0J4QyxpQkFBaUIsU0F4QmpDLFNBQWlDQyxHQUMvQixJQUFLdUMsRUFBZ0JzQixnQkFBaUIsT0FDdEM3RCxFQUFJOEQsaUJBRUosTUFBTUMsRUFBWS9ELEVBQUlnRSxVQUN0QjNILEVBQWMwSCxHQUFXLEdBRXpCcEgsRUFDR3dCLGFBQWEsQ0FDWkMsS0FBTW9FLEVBQXFCb0IsTUFDM0J2RixNQUFPb0UsRUFBNEJtQixRQUVwQ2pHLEtBQU1zRyxJQUNMeEMsRUFBZTlGLFlBQWNzSSxFQUFZN0YsS0FDekNzRCxFQUFxQi9GLFlBQWNzSSxFQUFZNUYsTUFDL0NpRSxFQUFxQjdHLFVBQVVVLElBQUl2QixFQUFTSSxrQkFDNUN1SSxFQUFXbkIsS0FFWjdCLE1BQU1DLFFBQVFDLE9BQ2R5RCxRQUFRLEtBQ1A3SCxFQUFjMEgsR0FBVyxJQUUvQixHQUlBMUIsRUFBb0J0QyxpQkFBaUIsUUFBUyxXQUM1Q3dELEVBQVduQixFQUNiLEdBR0FNLEVBQVczQyxpQkFBaUIsUUFBUyxXQUNuQ2UsRUFBVTZCLEVBQ1osR0FrQ0FHLEVBQVkvQyxpQkFBaUIsU0FoQzdCLFNBQTZCQyxHQUMzQixJQUFLOEMsRUFBWWUsZ0JBQWlCLE9BQ2xDN0QsRUFBSThELGlCQUVKLE1BQU1DLEVBQVkvRCxFQUFJZ0UsVUFDdEIzSCxFQUFjMEgsR0FBVyxHQUV6QnBILEVBQ0dpQyxjQUFjLENBQ2JSLEtBQU00RSxFQUF3QlksTUFDOUJsRixLQUFNcUUsRUFBMEJhLFFBRWpDakcsS0FBTTBCLElBRUdBLEVBQUtqQixLQUNMaUIsRUFBS1gsS0FHYlEsRUFBV2lGLFFBQVE5RSxHQUNuQmdCLEVBQVVDLFVBQVksR0FDdEJuQixJQUVBMEQsRUFBaUJwSCxVQUFVVSxJQUFJdkIsRUFBU0ksa0JBQ3hDZ0YsRUFBSTBELE9BQU9VLFFBQ1hiLEVBQVdaLEtBRVpwQyxNQUFNQyxRQUFRQyxPQUNkeUQsUUFBUSxLQUNQN0gsRUFBYzBILEdBQVcsSUFFL0IsR0FJQW5CLEVBQWdCN0MsaUJBQWlCLFFBQVMsV0FDeEN3RCxFQUFXWixFQUNiLEdBR0FmLEVBQWM3QixpQkFBaUIsUUFBUyxLQUN0Q2UsRUFBVWdCLEtBc0JaRSxFQUFlakMsaUJBQWlCLFNBbkJoQyxTQUFnQ0MsR0FDOUIsSUFBS2dDLEVBQWU2QixnQkFBaUIsT0FDckM3RCxFQUFJOEQsaUJBQ0osTUFBTUMsRUFBWS9ELEVBQUlnRSxVQUN0QjNILEVBQWMwSCxHQUFXLEdBQ3pCcEgsRUFDRzhCLFdBQVd5RCxFQUFnQjBCLE9BQzNCakcsS0FBTTRCLElBQ0xvQyxFQUFnQi9CLElBQU1MLEVBQUtaLE9BQzNCc0QsRUFBb0J4RyxVQUFVVSxJQUFJdkIsRUFBU0ksa0JBQzNDZ0YsRUFBSTBELE9BQU9VLFFBQ1hiLEVBQVd6QixLQUVadkIsTUFBTUMsUUFBUUMsT0FDZHlELFFBQVEsS0FDUDdILEVBQWMwSCxHQUFXLElBRS9CLEdBSUFoQyxFQUFtQmhDLGlCQUFpQixRQUFTLEtBQzNDd0QsRUFBV3pCLEtBb0Nib0IsRUFBa0JuRCxpQkFBaUIsU0F4Qm5DLFNBQWdDQyxHQUM5QkEsRUFBSThELGlCQUVKLE1BQU1DLEVBQVkvRCxFQUFJZ0UsVUFDdEIzSCxFQUFjMEgsR0FBVyxHQUV6QnBILEVBQ0drQyxXQUFXK0IsR0FDWGpELEtBQUssS0FFSixNQUFNd0MsRUFBUWpCLEVBQVdrQixVQUFXZixHQUFTQSxFQUFLWSxNQUFRVyxHQUMxRDFCLEVBQVdtRixPQUFPbEUsRUFBTyxHQUN6QkUsRUFBVUMsVUFBWSxHQUN0Qm5CLElBQ0F3QixFQUFlLEdBQ2ZDLEVBQWlCLEdBQ2pCMkMsRUFBV3hDLEtBRVpSLE1BQU1DLFFBQVFDLE9BQ2R5RCxRQUFRLEtBQ1A3SCxFQUFjMEgsR0FBVyxJQUUvQixHQUlBaEQsRUFBa0JoQixpQkFBaUIsWUFBY0MsS0FFN0NBLEVBQUkwRCxPQUFPakksVUFBVWtJLFNBQVMscUJBQzlCM0QsRUFBSTBELE9BQU9qSSxVQUFVa0ksU0FBUyxxQ0FFOUJoRCxFQUFlLEdBQ2ZDLEVBQWlCLEdBQ2pCMkMsRUFBV3hDLE1GdFBrQjFGLEVFeVFoQlQsRUZ4UUVpSCxTQUFTeUMsaUJBQWlCakosRUFBT1IsY0FFekN1RSxRQUFTakUsSUFuQk1vSixFQUFDcEosRUFBYUUsS0FDdEMsTUFBTVEsRUFBWTJJLE1BQU1DLEtBQ3RCdEosRUFBWW1KLGlCQUFpQmpKLEVBQU9QLGdCQUVoQ2dCLEVBQWFYLEVBQVlJLGNBQWNGLEVBQU9OLG1CQUVwRGEsRUFBZUMsRUFBV0MsRUFBWVQsR0FFdENRLEVBQVV1RCxRQUFTaEUsSUFDakJBLEVBQWEyRSxpQkFBaUIsUUFBUyxLQXRDaEIyRSxFQUFDdkosRUFBYUMsRUFBY0MsS0FDaERELEVBQWFZLFNBQVNDLE1BUXpCZixFQUFlQyxFQUFhQyxFQUFjQyxHQXJCdkJzSixFQUFDeEosRUFBYUMsRUFBY3dKLEVBQWN2SixLQUMvRCxNQUFNQyxFQUFlSCxFQUFZSSxjQUFjLElBQUlILEVBQWFJLFlBQ2hFSixFQUFhSyxVQUFVVSxJQUFJZCxFQUFPSixpQkFDbENLLEVBQWFLLFlBQWNpSixHQVd6QkQsQ0FDRXhKLEVBQ0FDLEVBQ0FBLEVBQWF5SixrQkFDYnhKLElBaUNBcUosQ0FBbUJ2SixFQUFhQyxFQUFjQyxHQUM5Q08sRUFBZUMsRUFBV0MsRUFBWVQsUUFTeENrSixDQUFrQnBKLEVBQWFFLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3NjcmlwdHMvdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3V0aWxzL2hlbHBlci5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvdXRpbHMvYXBpLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnRuU2VsZWN0b3I6IFwiLm1vZGFsX19zdWJtaXQtYnRuXCIsXG4gIGluYWN0aXZlQnRuQ2xhc3M6IFwibW9kYWxfX2J0bl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbn07XG5cbmNvbnN0IHNob3dJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbn07XG5cbmV4cG9ydCBjb25zdCBoaWRlSW5wdXRFcnJvciA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbn07XG5cbmNvbnN0IGNoZWNrSW5wdXRWYWxpZGl0eSA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpID0+IHtcbiAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICBzaG93SW5wdXRFcnJvcihcbiAgICAgIGZvcm1FbGVtZW50LFxuICAgICAgaW5wdXRFbGVtZW50LFxuICAgICAgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlLFxuICAgICAgY29uZmlnXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xuICB9XG59O1xuXG5jb25zdCBoYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XG4gIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gIH0pO1xufTtcblxuY29uc3QgdG9nZ2xlQnRuU3RhdGUgPSAoaW5wdXRMaXN0LCBidG5FbGVtZW50LCBjb25maWcpID0+IHtcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgYnRuRWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbmFjdGl2ZUJ0bkNsYXNzKTtcbiAgICBidG5FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICBidG5FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmluYWN0aXZlQnRuQ2xhc3MpO1xuICAgIGJ0bkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxufTtcblxuY29uc3Qgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybUVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgIGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpXG4gICk7XG4gIGNvbnN0IGJ0bkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdG5TZWxlY3Rvcik7XG5cbiAgdG9nZ2xlQnRuU3RhdGUoaW5wdXRMaXN0LCBidG5FbGVtZW50LCBjb25maWcpO1xuXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xuICAgICAgdG9nZ2xlQnRuU3RhdGUoaW5wdXRMaXN0LCBidG5FbGVtZW50LCBjb25maWcpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3Rvcik7XG5cbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBzZXRFdmVudExpc3RlbmVycyhmb3JtRWxlbWVudCwgY29uZmlnKTtcbiAgfSk7XG59O1xuIiwiZXhwb3J0IGZ1bmN0aW9uIHNldEJ1dHRvblRleHQoYnRuLCBpc0xvYWRpbmcpIHtcbiAgY29uc3QgdGV4dCA9IGJ0bi50ZXh0Q29udGVudC50cmltKCk7XG5cbiAgaXNMb2FkaW5nXG4gICAgPyAoYnRuLnRleHRDb250ZW50ID0gdGV4dC5zbGljZSgwLCAtMSkgKyBcImluZy4uLlwiKVxuICAgIDogKGJ0bi50ZXh0Q29udGVudCA9IHRleHQuc2xpY2UoMCwgLTYpICsgXCJlXCIpO1xufVxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCB7XG4gIGVuYWJsZVZhbGlkYXRpb24sXG4gIGhpZGVJbnB1dEVycm9yLFxuICBzZXR0aW5ncyxcbn0gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vdXRpbHMvYXBpLmpzXCI7XG5pbXBvcnQgeyBzZXRCdXR0b25UZXh0IH0gZnJvbSBcIi4uL3V0aWxzL2hlbHBlci5qc1wiO1xuXG4vLyBBUElcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjNkZWI1Y2IwLTI1Y2MtNDFhMC1iODFkLTIzYzMxMmMxMjc0NFwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbi8vIFBvcHVsYXRlIGNhcmRzIGFuZCBwcm9maWxlIEFwaSByZXF1ZXN0XG5sZXQgY2FyZHNBcnJheTtcblxuZnVuY3Rpb24gcmVsb2FkQ2FyZHMoKSB7XG4gIGNhcmRzQXJyYXkuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoY2FyZCk7XG4gICAgY2FyZHNMaXN0LmFwcGVuZChjYXJkRWxlbWVudCk7XG4gIH0pO1xufVxuYXBpXG4gIC5nZXRBcHBJbmZvKClcbiAgLnRoZW4oKFtjYXJkcywgdXNlcl0pID0+IHtcbiAgICBjYXJkc0FycmF5ID0gY2FyZHM7XG4gICAgcmVsb2FkQ2FyZHMoKTtcbiAgICBwcm9maWxlVGl0bGVFbC50ZXh0Q29udGVudCA9IHVzZXIubmFtZTtcbiAgICBwcm9maWxlRGVzY3JpcHRpb25FbC50ZXh0Q29udGVudCA9IHVzZXIuYWJvdXQ7XG4gICAgcHJvZmlsZUF2YXRhckVsLnNyYyA9IHVzZXIuYXZhdGFyO1xuICB9KVxuICAuY2F0Y2goY29uc29sZS5lcnJvcik7XG5cbi8vIEF2YXRhciBmb3JtIGVsZW1lbnRzXG5jb25zdCBlZGl0QXZhdGFyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItYnRuXCIpO1xuY29uc3QgZWRpdEF2YXRhck1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhdmF0YXItbW9kYWxcIik7XG5jb25zdCBlZGl0QXZhdGFyQ2xvc2VCdG4gPSBlZGl0QXZhdGFyTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuY29uc3QgZWRpdEF2YXRhckZvcm0gPSBlZGl0QXZhdGFyTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IGVkaXRBdmF0YXJTdWJtaXRCdG4gPSBlZGl0QXZhdGFyTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ0blwiKTtcbmNvbnN0IGVkaXRBdmF0YXJJbnB1dCA9IGVkaXRBdmF0YXJNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYXZhdGFyLWlucHV0XCIpO1xuY29uc3QgcHJvZmlsZUF2YXRhckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XG5cbi8vIEVkaXQgcHJvZmlsZSBlbGVtZW50c1xuY29uc3QgZWRpdFByb2ZpbGVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnRuXCIpO1xuY29uc3QgZWRpdFByb2ZpbGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1wcm9maWxlLW1vZGFsXCIpO1xuY29uc3QgZWRpdFByb2ZpbGVDbG9zZUJ0biA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuY29uc3QgZWRpdFByb2ZpbGVTdWJtaXRCdG4gPVxuICBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdC1idG5cIik7XG5jb25zdCBlZGl0UHJvZmlsZUZvcm0gPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBlZGl0UHJvZmlsZU5hbWVJbnB1dCA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1uYW1lLWlucHV0XCJcbik7XG5jb25zdCBlZGl0UHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxuKTtcblxuY29uc3QgcHJvZmlsZVRpdGxlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuXG4vLyBDYXJkIGZvcm0gZWxlbWVudHNcbmNvbnN0IG5ld1Bvc3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25ldy1wb3N0LWJ0blwiKTtcbmNvbnN0IG5ld1Bvc3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmV3LXBvc3QtbW9kYWxcIik7XG5jb25zdCBuZXdQb3N0Q2xvc2VCdG4gPSBuZXdQb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuY29uc3QgbmV3UG9zdFN1Ym1pdEJ0biA9IG5ld1Bvc3RNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zdWJtaXQtYnRuXCIpO1xuY29uc3QgbmV3UG9zdEZvcm0gPSBuZXdQb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IG5ld1Bvc3RDYXJkSW1hZ2VMaW5rSW5wdXQgPVxuICBuZXdQb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNjYXJkLWltYWdlLWlucHV0XCIpO1xuY29uc3QgbmV3UG9zdENhcmRDYXB0aW9uSW5wdXQgPSBuZXdQb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIjY2FyZC1jYXB0aW9uLWlucHV0XCJcbik7XG5cbi8vIFByZXZpZXcgaW1hZ2UgcG9wdXAgZWxlbWVudHNcbmNvbnN0IHByZXZpZXdJbWFnZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LWltYWdlLW1vZGFsXCIpO1xuY29uc3QgcHJldmlld0ltYWdlQ2xvc2VCdG4gPVxuICBwcmV2aWV3SW1hZ2VNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idG5cIik7XG5jb25zdCBwcmV2aWV3SW1hZ2UgPSBwcmV2aWV3SW1hZ2VNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbmNvbnN0IHByZXZpZXdJbWFnZUNhcHRpb24gPSBwcmV2aWV3SW1hZ2VNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xuXG4vLyBDb25maXJtYXRpb24gcG9wdXAgZWxlbWVudHNcblxuY29uc3QgY29uZmlybWF0aW9uTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NvbmZpcm1hdGlvbi1tb2RhbFwiKTtcbmNvbnN0IGNvbmZpcm1hdGlvbnRGb3JtID0gY29uZmlybWF0aW9uTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcblxubGV0IHNlbGVjdGVkQ2FyZCwgc2VsZWN0ZWRDYXJkSWQ7XG5cbi8vIENhcmRzIHJlbGF0ZWQgZWxlbWVudHNcbmNvbnN0IGNhcmRzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG5cbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50XG4gIC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIilcbiAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpO1xuXG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChkYXRhKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcblxuICBjb25zdCBjYXJkVGl0bGUgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICBjb25zdCBjYXJkSW1hZ2VMaW5rID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcblxuICBjYXJkSW1hZ2VMaW5rLnNyYyA9IGRhdGEubGluaztcbiAgY2FyZEltYWdlTGluay5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgZGF0YS5uYW1lKTtcbiAgY2FyZFRpdGxlLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuXG4gIGNvbnN0IGNhcmRMaWtlQnRuID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ0blwiKTtcbiAgaWYgKGRhdGEuaXNMaWtlZCkgY2FyZExpa2VCdG4uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnRuX2FjdGl2ZVwiKTtcbiAgY2FyZExpa2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IGhhbmRsZUxpa2VCdG5DbGljayhldnQsIGRhdGEpKTtcblxuICBjb25zdCBjYXJkRGVsZXRlQnRuID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnRuXCIpO1xuICBjYXJkRGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICAgIGhhbmRsZURlbGV0ZUJ0bkNsaWNrKGNhcmRFbGVtZW50LCBkYXRhKVxuICApO1xuXG4gIGNhcmRJbWFnZUxpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBwcmV2aWV3SW1hZ2VDYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHByZXZpZXdJbWFnZS5zcmMgPSBkYXRhLmxpbms7XG4gICAgcHJldmlld0ltYWdlLmFsdCA9IGRhdGEubmFtZTtcbiAgICBvcGVuTW9kYWwocHJldmlld0ltYWdlTW9kYWwpO1xuICB9KTtcblxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cbnByZXZpZXdJbWFnZUNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNsb3NlTW9kYWwocHJldmlld0ltYWdlTW9kYWwpO1xufSk7XG5cbi8vIE9wZW4gYW5kIGNsb3NlIG1vZGFscyBmdW5jdGlvbnNcbmZ1bmN0aW9uIG9wZW5Nb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfaXMtb3BlbmVkXCIpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgY2xvc2VPbkVzY2FwZSk7XG4gIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgY2xvc2VPbk92ZXJsYXlDbGljayk7XG59XG5cbmZ1bmN0aW9uIGNsb3NlTW9kYWwobW9kYWwpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX2lzLW9wZW5lZFwiKTtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGNsb3NlT25Fc2NhcGUpO1xuICBtb2RhbC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGNsb3NlT25PdmVybGF5Q2xpY2spO1xufVxuXG5mdW5jdGlvbiBjbG9zZU9uRXNjYXBlKGV2dCkge1xuICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9pcy1vcGVuZWRcIik7XG4gICAgY2xvc2VNb2RhbChtb2RhbCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2xvc2VPbk92ZXJsYXlDbGljayhldnQpIHtcbiAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikpIHtcbiAgICBjbG9zZU1vZGFsKGV2dC50YXJnZXQpO1xuICB9XG59XG5cbi8vIEVkaXQgcHJvZmlsZSBvcGVuL2Nsb3NlIG1vZGFsIGFuZCBoYW5kbGUgZm9ybSBzdWJtaXNzaW9uXG5cbmVkaXRQcm9maWxlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gIGVkaXRQcm9maWxlTmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZVRpdGxlRWwudGV4dENvbnRlbnQ7XG4gIGVkaXRQcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHByb2ZpbGVEZXNjcmlwdGlvbkVsLnRleHRDb250ZW50O1xuICBoaWRlSW5wdXRFcnJvcihlZGl0UHJvZmlsZU1vZGFsLCBlZGl0UHJvZmlsZU5hbWVJbnB1dCwgc2V0dGluZ3MpO1xuICBoaWRlSW5wdXRFcnJvcihlZGl0UHJvZmlsZU1vZGFsLCBlZGl0UHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsIHNldHRpbmdzKTtcbiAgb3Blbk1vZGFsKGVkaXRQcm9maWxlTW9kYWwpO1xufSk7XG5cbmZ1bmN0aW9uIGhhbmRsZUVkaXRQcm9maWxlU3VibWl0KGV2dCkge1xuICBpZiAoIWVkaXRQcm9maWxlRm9ybS5jaGVja1ZhbGlkaXR5KCkpIHJldHVybjtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgY29uc3Qgc3VibWl0QnRuID0gZXZ0LnN1Ym1pdHRlcjtcbiAgc2V0QnV0dG9uVGV4dChzdWJtaXRCdG4sIHRydWUpO1xuXG4gIGFwaVxuICAgIC5lZGl0VXNlckluZm8oe1xuICAgICAgbmFtZTogZWRpdFByb2ZpbGVOYW1lSW5wdXQudmFsdWUsXG4gICAgICBhYm91dDogZWRpdFByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlLFxuICAgIH0pXG4gICAgLnRoZW4oKHVwZGF0ZWRVc2VyKSA9PiB7XG4gICAgICBwcm9maWxlVGl0bGVFbC50ZXh0Q29udGVudCA9IHVwZGF0ZWRVc2VyLm5hbWU7XG4gICAgICBwcm9maWxlRGVzY3JpcHRpb25FbC50ZXh0Q29udGVudCA9IHVwZGF0ZWRVc2VyLmFib3V0O1xuICAgICAgZWRpdFByb2ZpbGVTdWJtaXRCdG4uY2xhc3NMaXN0LmFkZChzZXR0aW5ncy5pbmFjdGl2ZUJ0bkNsYXNzKTtcbiAgICAgIGNsb3NlTW9kYWwoZWRpdFByb2ZpbGVNb2RhbCk7XG4gICAgfSlcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBzZXRCdXR0b25UZXh0KHN1Ym1pdEJ0biwgZmFsc2UpO1xuICAgIH0pO1xufVxuXG5lZGl0UHJvZmlsZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdCk7XG5cbmVkaXRQcm9maWxlQ2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgY2xvc2VNb2RhbChlZGl0UHJvZmlsZU1vZGFsKTtcbn0pO1xuXG4vLyBDYXJkIG9wZW4vY2xvc2UgbW9kYWwgYW5kIGhhbmRsZSBmb3JtIHN1Ym1pc3Npb25cbm5ld1Bvc3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgb3Blbk1vZGFsKG5ld1Bvc3RNb2RhbCk7XG59KTtcblxuZnVuY3Rpb24gaGFuZGxlTmV3UG9zdFN1Ym1pdChldnQpIHtcbiAgaWYgKCFuZXdQb3N0Rm9ybS5jaGVja1ZhbGlkaXR5KCkpIHJldHVybjtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgY29uc3Qgc3VibWl0QnRuID0gZXZ0LnN1Ym1pdHRlcjtcbiAgc2V0QnV0dG9uVGV4dChzdWJtaXRCdG4sIHRydWUpO1xuXG4gIGFwaVxuICAgIC5jcmVhdGVOZXdDYXJkKHtcbiAgICAgIG5hbWU6IG5ld1Bvc3RDYXJkQ2FwdGlvbklucHV0LnZhbHVlLFxuICAgICAgbGluazogbmV3UG9zdENhcmRJbWFnZUxpbmtJbnB1dC52YWx1ZSxcbiAgICB9KVxuICAgIC50aGVuKChjYXJkKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICBuYW1lOiBjYXJkLm5hbWUsXG4gICAgICAgIGxpbms6IGNhcmQubGluayxcbiAgICAgIH07XG4gICAgICAvL2NvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoZGF0YSk7XG4gICAgICBjYXJkc0FycmF5LnVuc2hpZnQoY2FyZCk7XG4gICAgICBjYXJkc0xpc3QuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgIHJlbG9hZENhcmRzKCk7XG4gICAgICAvL2NhcmRzTGlzdC5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbiAgICAgIG5ld1Bvc3RTdWJtaXRCdG4uY2xhc3NMaXN0LmFkZChzZXR0aW5ncy5pbmFjdGl2ZUJ0bkNsYXNzKTtcbiAgICAgIGV2dC50YXJnZXQucmVzZXQoKTtcbiAgICAgIGNsb3NlTW9kYWwobmV3UG9zdE1vZGFsKTtcbiAgICB9KVxuICAgIC5jYXRjaChjb25zb2xlLmVycm9yKVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHNldEJ1dHRvblRleHQoc3VibWl0QnRuLCBmYWxzZSk7XG4gICAgfSk7XG59XG5cbm5ld1Bvc3RGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlTmV3UG9zdFN1Ym1pdCk7XG5cbm5ld1Bvc3RDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBjbG9zZU1vZGFsKG5ld1Bvc3RNb2RhbCk7XG59KTtcblxuLy8gQXZhdGFyIG9wZW4vY2xvc2UgbW9kYWwgYW5kIGhhbmRsZSBmb3JtIHN1Ym1pc3Npb25cbmVkaXRBdmF0YXJCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgb3Blbk1vZGFsKGVkaXRBdmF0YXJNb2RhbCk7XG59KTtcblxuZnVuY3Rpb24gaGFuZGxlRWRpdEF2YXRhclN1Ym1pdChldnQpIHtcbiAgaWYgKCFlZGl0QXZhdGFyRm9ybS5jaGVja1ZhbGlkaXR5KCkpIHJldHVybjtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IHN1Ym1pdEJ0biA9IGV2dC5zdWJtaXR0ZXI7XG4gIHNldEJ1dHRvblRleHQoc3VibWl0QnRuLCB0cnVlKTtcbiAgYXBpXG4gICAgLmVkaXRBdmF0YXIoZWRpdEF2YXRhcklucHV0LnZhbHVlKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBwcm9maWxlQXZhdGFyRWwuc3JjID0gZGF0YS5hdmF0YXI7XG4gICAgICBlZGl0QXZhdGFyU3VibWl0QnRuLmNsYXNzTGlzdC5hZGQoc2V0dGluZ3MuaW5hY3RpdmVCdG5DbGFzcyk7XG4gICAgICBldnQudGFyZ2V0LnJlc2V0KCk7XG4gICAgICBjbG9zZU1vZGFsKGVkaXRBdmF0YXJNb2RhbCk7XG4gICAgfSlcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBzZXRCdXR0b25UZXh0KHN1Ym1pdEJ0biwgZmFsc2UpO1xuICAgIH0pO1xufVxuXG5lZGl0QXZhdGFyRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUVkaXRBdmF0YXJTdWJtaXQpO1xuXG5lZGl0QXZhdGFyQ2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2xvc2VNb2RhbChlZGl0QXZhdGFyTW9kYWwpO1xufSk7XG5cbi8vIENvbmZpcm1hdGlvbiBvcGVuL2Nsb3NlIG1vZGFsIGFuZCBoYW5kbGUgZm9ybSBzdWJtaXNzaW9uXG5cbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUJ0bkNsaWNrKGNhcmRFbGVtZW50LCBkYXRhKSB7XG4gIHNlbGVjdGVkQ2FyZCA9IGNhcmRFbGVtZW50O1xuICBzZWxlY3RlZENhcmRJZCA9IGRhdGEuX2lkO1xuICBjb25zb2xlLmxvZyhzZWxlY3RlZENhcmRJZCk7XG4gIG9wZW5Nb2RhbChjb25maXJtYXRpb25Nb2RhbCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNhcmRTdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGNvbnN0IHN1Ym1pdEJ0biA9IGV2dC5zdWJtaXR0ZXI7XG4gIHNldEJ1dHRvblRleHQoc3VibWl0QnRuLCB0cnVlKTtcblxuICBhcGlcbiAgICAuZGVsZXRlQ2FyZChzZWxlY3RlZENhcmRJZClcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICAvLyBzZWxlY3RlZENhcmQucmVtb3ZlKCk7XG4gICAgICBjb25zdCBpbmRleCA9IGNhcmRzQXJyYXkuZmluZEluZGV4KChjYXJkKSA9PiBjYXJkLl9pZCA9PT0gc2VsZWN0ZWRDYXJkSWQpO1xuICAgICAgY2FyZHNBcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgY2FyZHNMaXN0LmlubmVySFRNTCA9IFwiXCI7XG4gICAgICByZWxvYWRDYXJkcygpO1xuICAgICAgc2VsZWN0ZWRDYXJkID0gXCJcIjtcbiAgICAgIHNlbGVjdGVkQ2FyZElkID0gXCJcIjtcbiAgICAgIGNsb3NlTW9kYWwoY29uZmlybWF0aW9uTW9kYWwpO1xuICAgIH0pXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgc2V0QnV0dG9uVGV4dChzdWJtaXRCdG4sIGZhbHNlKTtcbiAgICB9KTtcbn1cblxuY29uZmlybWF0aW9udEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVEZWxldGVDYXJkU3VibWl0KTtcblxuY29uZmlybWF0aW9uTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XG4gIGlmIChcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZS1idG5cIikgfHxcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsZV9fc3VibWl0LWJ0bl90eXBlX2NhbmNlbFwiKVxuICApIHtcbiAgICBzZWxlY3RlZENhcmQgPSBcIlwiO1xuICAgIHNlbGVjdGVkQ2FyZElkID0gXCJcIjtcbiAgICBjbG9zZU1vZGFsKGNvbmZpcm1hdGlvbk1vZGFsKTtcbiAgfVxufSk7XG5cbmZ1bmN0aW9uIGhhbmRsZUxpa2VCdG5DbGljayhldnQsIGRhdGEpIHtcbiAgLy9jb25zdCBpc0xpa2VkID0gZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJjYXJkX19saWtlLWJ0bl9hY3RpdmVcIik7XG4gIGFwaVxuICAgIC50b2dnbGVMaWtlKGRhdGEuX2lkLCBkYXRhLmlzTGlrZWQpIC8vIGlzTGlrZWQpXG4gICAgLnRoZW4oKHVwZGF0ZWRDYXJkKSA9PiB7XG4gICAgICBjb25zdCBpbmRleCA9IGNhcmRzQXJyYXkuZmluZEluZGV4KChjYXJkKSA9PiBjYXJkLl9pZCA9PT0gZGF0YS5faWQpO1xuXG4gICAgICBjYXJkc0FycmF5W2luZGV4XSA9IHVwZGF0ZWRDYXJkO1xuICAgICAgY2FyZHNMaXN0LmlubmVySFRNTCA9IFwiXCI7XG4gICAgICByZWxvYWRDYXJkcygpO1xuICAgICAgLy9ldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ0bl9hY3RpdmVcIik7XG4gICAgfSlcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XG59XG5cbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xuIiwiY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIGdldEFwcEluZm8oKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldEluaXRhbENhcmRzKCksIHRoaXMuZ2V0VXNlckluZm8oKV0pO1xuICB9XG5cbiAgX3JlcXVlc3QodXJsLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGZldGNoKHVybCwgb3B0aW9ucykudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gIH1cblxuICBnZXRJbml0YWxDYXJkcygpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSk7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSk7XG4gIH1cblxuICBlZGl0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGFib3V0LFxuICAgICAgfSksXG4gICAgfSk7XG4gIH1cblxuICBlZGl0QXZhdGFyKGxpbmspIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcjogbGluayxcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9XG5cbiAgY3JlYXRlTmV3Q2FyZCh7IG5hbWUsIGxpbmsgfSkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGxpbmssXG4gICAgICB9KSxcbiAgICB9KTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KTtcbiAgfVxuXG4gIHRvZ2dsZUxpa2UoY2FyZElkLCBpc0xpa2VkKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBpc0xpa2VkID8gXCJERUxFVEVcIiA6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFwaTtcbiJdLCJuYW1lcyI6WyJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdG5TZWxlY3RvciIsImluYWN0aXZlQnRuQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJoaWRlSW5wdXRFcnJvciIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiY29uZmlnIiwiZXJyb3JFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImlkIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidGV4dENvbnRlbnQiLCJ0b2dnbGVCdG5TdGF0ZSIsImlucHV0TGlzdCIsImJ0bkVsZW1lbnQiLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsImhhc0ludmFsaWRJbnB1dCIsImFkZCIsImRpc2FibGVkIiwic2V0QnV0dG9uVGV4dCIsImJ0biIsImlzTG9hZGluZyIsInRleHQiLCJ0cmltIiwic2xpY2UiLCJhcGkiLCJjb25zdHJ1Y3RvciIsImJhc2VVcmwiLCJoZWFkZXJzIiwidGhpcyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJnZXRBcHBJbmZvIiwiUHJvbWlzZSIsImFsbCIsImdldEluaXRhbENhcmRzIiwiZ2V0VXNlckluZm8iLCJfcmVxdWVzdCIsInVybCIsIm9wdGlvbnMiLCJmZXRjaCIsInRoZW4iLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsInJlamVjdCIsInN0YXR1cyIsIm1ldGhvZCIsImVkaXRVc2VySW5mbyIsIm5hbWUiLCJhYm91dCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZWRpdEF2YXRhciIsImxpbmsiLCJhdmF0YXIiLCJjcmVhdGVOZXdDYXJkIiwiZGVsZXRlQ2FyZCIsImNhcmRJZCIsInRvZ2dsZUxpa2UiLCJpc0xpa2VkIiwiYXV0aG9yaXphdGlvbiIsImNhcmRzQXJyYXkiLCJyZWxvYWRDYXJkcyIsImZvckVhY2giLCJjYXJkIiwiY2FyZEVsZW1lbnQiLCJkYXRhIiwiY2FyZFRlbXBsYXRlIiwiY2xvbmVOb2RlIiwiY2FyZFRpdGxlIiwiY2FyZEltYWdlTGluayIsInNyYyIsInNldEF0dHJpYnV0ZSIsImNhcmRMaWtlQnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsIl9pZCIsInVwZGF0ZWRDYXJkIiwiaW5kZXgiLCJmaW5kSW5kZXgiLCJjYXJkc0xpc3QiLCJpbm5lckhUTUwiLCJjYXRjaCIsImNvbnNvbGUiLCJlcnJvciIsImhhbmRsZUxpa2VCdG5DbGljayIsInNlbGVjdGVkQ2FyZCIsInNlbGVjdGVkQ2FyZElkIiwibG9nIiwib3Blbk1vZGFsIiwiY29uZmlybWF0aW9uTW9kYWwiLCJoYW5kbGVEZWxldGVCdG5DbGljayIsInByZXZpZXdJbWFnZUNhcHRpb24iLCJwcmV2aWV3SW1hZ2UiLCJhbHQiLCJwcmV2aWV3SW1hZ2VNb2RhbCIsImdldENhcmRFbGVtZW50IiwiYXBwZW5kIiwiY2FyZHMiLCJ1c2VyIiwicHJvZmlsZVRpdGxlRWwiLCJwcm9maWxlRGVzY3JpcHRpb25FbCIsInByb2ZpbGVBdmF0YXJFbCIsImVkaXRBdmF0YXJCdG4iLCJkb2N1bWVudCIsImVkaXRBdmF0YXJNb2RhbCIsImVkaXRBdmF0YXJDbG9zZUJ0biIsImVkaXRBdmF0YXJGb3JtIiwiZWRpdEF2YXRhclN1Ym1pdEJ0biIsImVkaXRBdmF0YXJJbnB1dCIsImVkaXRQcm9maWxlQnRuIiwiZWRpdFByb2ZpbGVNb2RhbCIsImVkaXRQcm9maWxlQ2xvc2VCdG4iLCJlZGl0UHJvZmlsZVN1Ym1pdEJ0biIsImVkaXRQcm9maWxlRm9ybSIsImVkaXRQcm9maWxlTmFtZUlucHV0IiwiZWRpdFByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwibmV3UG9zdEJ0biIsIm5ld1Bvc3RNb2RhbCIsIm5ld1Bvc3RDbG9zZUJ0biIsIm5ld1Bvc3RTdWJtaXRCdG4iLCJuZXdQb3N0Rm9ybSIsIm5ld1Bvc3RDYXJkSW1hZ2VMaW5rSW5wdXQiLCJuZXdQb3N0Q2FyZENhcHRpb25JbnB1dCIsInByZXZpZXdJbWFnZUNsb3NlQnRuIiwiY29uZmlybWF0aW9udEZvcm0iLCJjb250ZW50IiwibW9kYWwiLCJjbG9zZU9uRXNjYXBlIiwiY2xvc2VPbk92ZXJsYXlDbGljayIsImNsb3NlTW9kYWwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5IiwidGFyZ2V0IiwiY29udGFpbnMiLCJ2YWx1ZSIsImNoZWNrVmFsaWRpdHkiLCJwcmV2ZW50RGVmYXVsdCIsInN1Ym1pdEJ0biIsInN1Ym1pdHRlciIsInVwZGF0ZWRVc2VyIiwiZmluYWxseSIsInVuc2hpZnQiLCJyZXNldCIsInNwbGljZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzZXRFdmVudExpc3RlbmVycyIsIkFycmF5IiwiZnJvbSIsImNoZWNrSW5wdXRWYWxpZGl0eSIsInNob3dJbnB1dEVycm9yIiwiZXJyb3JNZXNzYWdlIiwidmFsaWRhdGlvbk1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9