!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitBtnSelector:".modal__submit-btn",inactiveBtnClass:"modal__btn_disabled",inputErrorClass:"modal__input_type_error"},t=(e,t,n)=>{(e=>e.some(e=>!e.validity.valid))(e)?(t.classList.add(n.inactiveBtnClass),t.disabled=!0):(t.classList.remove(n.inactiveBtnClass),t.disabled=!1)},n=document.querySelector(".profile__edit-btn"),o=document.querySelector("#edit-profile-modal"),r=o.querySelector(".modal__close-btn"),a=o.querySelector(".modal__submit-btn"),s=o.querySelector(".modal__form"),c=o.querySelector("#profile-name-input"),i=o.querySelector("#profile-description-input"),l=document.querySelector(".profile__title"),d=document.querySelector(".profile__description"),u=document.querySelector(".profile__new-post-btn"),m=document.querySelector("#new-post-modal"),p=m.querySelector(".modal__close-btn"),_=m.querySelector(".modal__submit-btn"),f=m.querySelector(".modal__form"),y=m.querySelector("#card-image-input"),v=m.querySelector("#card-caption-input"),S=document.querySelector("#preview-image-modal"),g=S.querySelector(".modal__close-btn"),q=S.querySelector(".modal__image"),b=S.querySelector(".modal__caption"),h=document.querySelector(".cards__list"),w=document.querySelector("#card-template").content.querySelector(".card");function k(e){const t=w.cloneNode(!0),n=t.querySelector(".card__title"),o=t.querySelector(".card__image");return o.src=e.link,o.setAttribute("alt",e.name),n.textContent=e.name,t.querySelector(".card__like-btn").addEventListener("click",e=>{e.target.classList.toggle("card__like-btn_active")}),t.querySelector(".card__delete-btn").addEventListener("click",()=>{t.remove()}),o.addEventListener("click",()=>{b.textContent=e.name,q.src=e.link,q.alt=e.name,L(S)}),t}function L(e){e.classList.add("modal_is-opened"),document.addEventListener("keyup",C),e.addEventListener("mousedown",x)}function E(e){e.classList.remove("modal_is-opened"),document.removeEventListener("keyup",C),e.removeEventListener("mousedown",x)}function C(e){"Escape"===e.key&&E(document.querySelector(".modal_is-opened"))}function x(e){e.target.classList.contains("modal")&&E(e.target)}var z;g.addEventListener("click",()=>{E(S)}),s.addEventListener("submit",function(t){s.checkValidity()&&(t.preventDefault(),l.textContent=c.value,d.textContent=i.value,a.classList.add(e.inactiveBtnClass),E(o))}),f.addEventListener("submit",function(t){if(!f.checkValidity())return;t.preventDefault();const n=k({name:v.value,link:y.value});h.prepend(n),_.classList.add(e.inactiveBtnClass),t.target.reset(),E(m)}),n.addEventListener("click",function(){c.value=l.textContent,i.value=d.textContent,L(o)}),u.addEventListener("click",function(){L(m)}),r.addEventListener("click",function(){E(o)}),p.addEventListener("click",function(){E(m)}),[{name:"Golden Gate Bridge",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/7-photo-by-griffin-wooldridge-from-pexels.jpg"},{name:"Val Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"}].forEach(e=>{const t=k(e);h.append(t)}),z=e,document.querySelectorAll(z.formSelector).forEach(e=>{((e,n)=>{const o=Array.from(e.querySelectorAll(n.inputSelector)),r=e.querySelector(n.submitBtnSelector);t(o,r,n),o.forEach(a=>{a.addEventListener("input",()=>{((e,t,n)=>{t.validity.valid?((e,t,n)=>{const o=e.querySelector(`.${t.id}-error`);t.classList.remove(n.inputErrorClass),o.textContent=""})(e,t,n):((e,t,n,o)=>{const r=e.querySelector(`.${t.id}-error`);t.classList.add(o.inputErrorClass),r.textContent=n})(e,t,t.validationMessage,n)})(e,a,n),t(o,r,n)})})})(e,z)})}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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b0hoQlQsRURuSEVvQixTQUFTd0QsaUJBQWlCbkUsRUFBT1IsY0FFekN3RSxRQUFTSSxJQW5CTUMsRUFBQ0QsRUFBYXBFLEtBQ3RDLE1BQU1GLEVBQVl3RSxNQUFNQyxLQUN0QkgsRUFBWUQsaUJBQWlCbkUsRUFBT1AsZ0JBRWhDTSxFQUFhcUUsRUFBWXhELGNBQWNaLEVBQU9OLG1CQUVwREcsRUFBZUMsRUFBV0MsRUFBWUMsR0FFdENGLEVBQVVrRSxRQUFTOUQsSUFDakJBLEVBQWE0QyxpQkFBaUIsUUFBUyxLQXRDaEIwQixFQUFDSixFQUFhbEUsRUFBY0YsS0FDaERFLEVBQWFDLFNBQVNDLE1BUE5xRSxFQUFDTCxFQUFhbEUsRUFBY0YsS0FDakQsTUFBTTBFLEVBQWVOLEVBQVl4RCxjQUFjLElBQUlWLEVBQWF5RSxZQUNoRXpFLEVBQWFJLFVBQVVHLE9BQU9ULEVBQU9KLGlCQUNyQzhFLEVBQWE3QixZQUFjLElBWXpCNEIsQ0FBZUwsRUFBYWxFLEVBQWNGLEdBckJ2QjRFLEVBQUNSLEVBQWFsRSxFQUFjMkUsRUFBYzdFLEtBQy9ELE1BQU0wRSxFQUFlTixFQUFZeEQsY0FBYyxJQUFJVixFQUFheUUsWUFDaEV6RSxFQUFhSSxVQUFVQyxJQUFJUCxFQUFPSixpQkFDbEM4RSxFQUFhN0IsWUFBY2dDLEdBV3pCRCxDQUNFUixFQUNBbEUsRUFDQUEsRUFBYTRFLGtCQUNiOUUsSUFpQ0F3RSxDQUFtQkosRUFBYWxFLEVBQWNGLEdBQzlDSCxFQUFlQyxFQUFXQyxFQUFZQyxRQVN4Q3FFLENBQWtCRCxFQUFhcEUsSSIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvc2NyaXB0cy92YWxpZGF0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdG5TZWxlY3RvcjogXCIubW9kYWxfX3N1Ym1pdC1idG5cIixcbiAgaW5hY3RpdmVCdG5DbGFzczogXCJtb2RhbF9fYnRuX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxufTtcblxuY29uc3Qgc2hvd0lucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlLCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xufTtcblxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG59O1xuXG5jb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgc2hvd0lucHV0RXJyb3IoXG4gICAgICBmb3JtRWxlbWVudCxcbiAgICAgIGlucHV0RWxlbWVudCxcbiAgICAgIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSxcbiAgICAgIGNvbmZpZ1xuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKTtcbiAgfVxufTtcblxuY29uc3QgaGFzSW52YWxpZElucHV0ID0gKGlucHV0TGlzdCkgPT4ge1xuICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICB9KTtcbn07XG5cbmNvbnN0IHRvZ2dsZUJ0blN0YXRlID0gKGlucHV0TGlzdCwgYnRuRWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGlmIChoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xuICAgIGJ0bkVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuaW5hY3RpdmVCdG5DbGFzcyk7XG4gICAgYnRuRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gIH0gZWxzZSB7XG4gICAgYnRuRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbmFjdGl2ZUJ0bkNsYXNzKTtcbiAgICBidG5FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gIH1cbn07XG5cbmNvbnN0IHNldEV2ZW50TGlzdGVuZXJzID0gKGZvcm1FbGVtZW50LCBjb25maWcpID0+IHtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dFNlbGVjdG9yKVxuICApO1xuICBjb25zdCBidG5FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnRuU2VsZWN0b3IpO1xuXG4gIHRvZ2dsZUJ0blN0YXRlKGlucHV0TGlzdCwgYnRuRWxlbWVudCwgY29uZmlnKTtcblxuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICBjaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKTtcbiAgICAgIHRvZ2dsZUJ0blN0YXRlKGlucHV0TGlzdCwgYnRuRWxlbWVudCwgY29uZmlnKTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpO1xuXG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQsIGNvbmZpZyk7XG4gIH0pO1xufTtcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgeyBlbmFibGVWYWxpZGF0aW9uLCBzZXR0aW5ncyB9IGZyb20gXCIuLi9zY3JpcHRzL3ZhbGlkYXRpb24uanNcIjtcbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiR29sZGVuIEdhdGUgQnJpZGdlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzctcGhvdG8tYnktZ3JpZmZpbi13b29sZHJpZGdlLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYWwgVGhvcmVuc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8xLXBob3RvLWJ5LW1vcml0ei1mZWxkbWFubi1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiUmVzdGF1cmFudCB0ZXJyYWNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzItcGhvdG8tYnktY2VpbGluZS1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQW4gb3V0ZG9vciBjYWZlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzMtcGhvdG8tYnktdHViYW51ci1kb2dhbi1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQSB2ZXJ5IGxvbmcgYnJpZGdlLCBvdmVyIHRoZSBmb3Jlc3QgYW5kIHRocm91Z2ggdGhlIHRyZWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzQtcGhvdG8tYnktbWF1cmljZS1sYXNjaGV0LWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJUdW5uZWwgd2l0aCBtb3JuaW5nIGxpZ2h0XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzUtcGhvdG8tYnktdmFuLWFuaC1uZ3V5ZW4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIk1vdW50YWluIGhvdXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzYtcGhvdG8tYnktbW9yaXR6LWZlbGRtYW5uLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuXTtcblxuY29uc3QgZWRpdFByb2ZpbGVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnRuXCIpO1xuY29uc3QgZWRpdFByb2ZpbGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1wcm9maWxlLW1vZGFsXCIpO1xuY29uc3QgZWRpdFByb2ZpbGVDbG9zZUJ0biA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuY29uc3QgZWRpdFByb2ZpbGVTdWJtaXRCdG4gPVxuICBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdC1idG5cIik7XG5jb25zdCBlZGl0UHJvZmlsZUZvcm0gPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBlZGl0UHJvZmlsZU5hbWVJbnB1dCA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1uYW1lLWlucHV0XCJcbik7XG5jb25zdCBlZGl0UHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxuKTtcblxuY29uc3QgcHJvZmlsZVRpdGxlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuXG5jb25zdCBuZXdQb3N0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uZXctcG9zdC1idG5cIik7XG5jb25zdCBuZXdQb3N0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25ldy1wb3N0LW1vZGFsXCIpO1xuY29uc3QgbmV3UG9zdENsb3NlQnRuID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcbmNvbnN0IG5ld1Bvc3RTdWJtaXRCdG4gPSBuZXdQb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ0blwiKTtcbmNvbnN0IG5ld1Bvc3RGb3JtID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBuZXdQb3N0Q2FyZEltYWdlTGlua0lucHV0ID1cbiAgbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1pbWFnZS1pbnB1dFwiKTtcbmNvbnN0IG5ld1Bvc3RDYXJkQ2FwdGlvbklucHV0ID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI2NhcmQtY2FwdGlvbi1pbnB1dFwiXG4pO1xuXG5jb25zdCBwcmV2aWV3SW1hZ2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1pbWFnZS1tb2RhbFwiKTtcbmNvbnN0IHByZXZpZXdJbWFnZUNsb3NlQnRuID1cbiAgcHJldmlld0ltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuY29uc3QgcHJldmlld0ltYWdlID0gcHJldmlld0ltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG5jb25zdCBwcmV2aWV3SW1hZ2VDYXB0aW9uID0gcHJldmlld0ltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcblxuY29uc3QgY2FyZHNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcblxuY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnRcbiAgLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKVxuICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIik7XG5cbmZ1bmN0aW9uIGdldENhcmRFbGVtZW50KGRhdGEpIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpO1xuXG4gIGNvbnN0IGNhcmRUaXRsZSA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XG4gIGNvbnN0IGNhcmRJbWFnZUxpbmsgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuXG4gIGNhcmRJbWFnZUxpbmsuc3JjID0gZGF0YS5saW5rO1xuICBjYXJkSW1hZ2VMaW5rLnNldEF0dHJpYnV0ZShcImFsdFwiLCBkYXRhLm5hbWUpO1xuICBjYXJkVGl0bGUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG5cbiAgY29uc3QgY2FyZExpa2VCdG4gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnRuXCIpO1xuICBjYXJkTGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnRuX2FjdGl2ZVwiKTtcbiAgfSk7XG5cbiAgY29uc3QgY2FyZERlbGV0ZUJ0biA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ0blwiKTtcbiAgY2FyZERlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNhcmRFbGVtZW50LnJlbW92ZSgpO1xuICB9KTtcblxuICBjYXJkSW1hZ2VMaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgcHJldmlld0ltYWdlQ2FwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICBwcmV2aWV3SW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xuICAgIHByZXZpZXdJbWFnZS5hbHQgPSBkYXRhLm5hbWU7XG4gICAgb3Blbk1vZGFsKHByZXZpZXdJbWFnZU1vZGFsKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufVxucHJldmlld0ltYWdlQ2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2xvc2VNb2RhbChwcmV2aWV3SW1hZ2VNb2RhbCk7XG59KTtcbmZ1bmN0aW9uIG9wZW5Nb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfaXMtb3BlbmVkXCIpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgY2xvc2VPbkVzY2FwZSk7XG4gIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgY2xvc2VPbk92ZXJsYXlDbGljayk7XG59XG5mdW5jdGlvbiBjbG9zZU1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9pcy1vcGVuZWRcIik7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBjbG9zZU9uRXNjYXBlKTtcbiAgbW9kYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBjbG9zZU9uT3ZlcmxheUNsaWNrKTtcbn1cbmZ1bmN0aW9uIGNsb3NlT25Fc2NhcGUoZXZ0KSB7XG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX2lzLW9wZW5lZFwiKTtcbiAgICBjbG9zZU1vZGFsKG1vZGFsKTtcbiAgfVxufVxuZnVuY3Rpb24gY2xvc2VPbk92ZXJsYXlDbGljayhldnQpIHtcbiAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikpIHtcbiAgICBjbG9zZU1vZGFsKGV2dC50YXJnZXQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUVkaXRQcm9maWxlU3VibWl0KGV2dCkge1xuICBpZiAoIWVkaXRQcm9maWxlRm9ybS5jaGVja1ZhbGlkaXR5KCkpIHJldHVybjtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIHByb2ZpbGVUaXRsZUVsLnRleHRDb250ZW50ID0gZWRpdFByb2ZpbGVOYW1lSW5wdXQudmFsdWU7XG4gIHByb2ZpbGVEZXNjcmlwdGlvbkVsLnRleHRDb250ZW50ID0gZWRpdFByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlO1xuICBlZGl0UHJvZmlsZVN1Ym1pdEJ0bi5jbGFzc0xpc3QuYWRkKHNldHRpbmdzLmluYWN0aXZlQnRuQ2xhc3MpO1xuICBjbG9zZU1vZGFsKGVkaXRQcm9maWxlTW9kYWwpO1xufVxuXG5lZGl0UHJvZmlsZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdCk7XG5cbmZ1bmN0aW9uIGhhbmRsZU5ld1Bvc3RTdWJtaXQoZXZ0KSB7XG4gIGlmICghbmV3UG9zdEZvcm0uY2hlY2tWYWxpZGl0eSgpKSByZXR1cm47XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBkYXRhID0ge1xuICAgIG5hbWU6IG5ld1Bvc3RDYXJkQ2FwdGlvbklucHV0LnZhbHVlLFxuICAgIGxpbms6IG5ld1Bvc3RDYXJkSW1hZ2VMaW5rSW5wdXQudmFsdWUsXG4gIH07XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoZGF0YSk7XG4gIGNhcmRzTGlzdC5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbiAgbmV3UG9zdFN1Ym1pdEJ0bi5jbGFzc0xpc3QuYWRkKHNldHRpbmdzLmluYWN0aXZlQnRuQ2xhc3MpO1xuICBldnQudGFyZ2V0LnJlc2V0KCk7XG4gIGNsb3NlTW9kYWwobmV3UG9zdE1vZGFsKTtcbn1cblxubmV3UG9zdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVOZXdQb3N0U3VibWl0KTtcblxuZWRpdFByb2ZpbGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgZWRpdFByb2ZpbGVOYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlVGl0bGVFbC50ZXh0Q29udGVudDtcbiAgZWRpdFByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uRWwudGV4dENvbnRlbnQ7XG4gIC8vaGlkZUlucHV0RXJyb3IoZWRpdFByb2ZpbGVNb2RhbCwgZWRpdFByb2ZpbGVOYW1lSW5wdXQsIHNldHRpbmdzKTtcbiAgLy8gaGlkZUlucHV0RXJyb3IoXG4gIC8vICAgZWRpdFByb2ZpbGVNb2RhbCxcbiAgLy8gICBlZGl0UHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsXG4gIC8vICAgc2V0dGluZ3NcbiAgLy8gKTtcbiAgb3Blbk1vZGFsKGVkaXRQcm9maWxlTW9kYWwpO1xufSk7XG5cbm5ld1Bvc3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgb3Blbk1vZGFsKG5ld1Bvc3RNb2RhbCk7XG59KTtcblxuZWRpdFByb2ZpbGVDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBjbG9zZU1vZGFsKGVkaXRQcm9maWxlTW9kYWwpO1xufSk7XG5uZXdQb3N0Q2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgY2xvc2VNb2RhbChuZXdQb3N0TW9kYWwpO1xufSk7XG5cbmluaXRpYWxDYXJkcy5mb3JFYWNoKChjYXJkKSA9PiB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoY2FyZCk7XG4gIGNhcmRzTGlzdC5hcHBlbmQoY2FyZEVsZW1lbnQpO1xufSk7XG5cbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xuIl0sIm5hbWVzIjpbInNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ0blNlbGVjdG9yIiwiaW5hY3RpdmVCdG5DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsInRvZ2dsZUJ0blN0YXRlIiwiaW5wdXRMaXN0IiwiYnRuRWxlbWVudCIsImNvbmZpZyIsInNvbWUiLCJpbnB1dEVsZW1lbnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiaGFzSW52YWxpZElucHV0IiwiY2xhc3NMaXN0IiwiYWRkIiwiZGlzYWJsZWQiLCJyZW1vdmUiLCJlZGl0UHJvZmlsZUJ0biIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImVkaXRQcm9maWxlTW9kYWwiLCJlZGl0UHJvZmlsZUNsb3NlQnRuIiwiZWRpdFByb2ZpbGVTdWJtaXRCdG4iLCJlZGl0UHJvZmlsZUZvcm0iLCJlZGl0UHJvZmlsZU5hbWVJbnB1dCIsImVkaXRQcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsInByb2ZpbGVUaXRsZUVsIiwicHJvZmlsZURlc2NyaXB0aW9uRWwiLCJuZXdQb3N0QnRuIiwibmV3UG9zdE1vZGFsIiwibmV3UG9zdENsb3NlQnRuIiwibmV3UG9zdFN1Ym1pdEJ0biIsIm5ld1Bvc3RGb3JtIiwibmV3UG9zdENhcmRJbWFnZUxpbmtJbnB1dCIsIm5ld1Bvc3RDYXJkQ2FwdGlvbklucHV0IiwicHJldmlld0ltYWdlTW9kYWwiLCJwcmV2aWV3SW1hZ2VDbG9zZUJ0biIsInByZXZpZXdJbWFnZSIsInByZXZpZXdJbWFnZUNhcHRpb24iLCJjYXJkc0xpc3QiLCJjYXJkVGVtcGxhdGUiLCJjb250ZW50IiwiZ2V0Q2FyZEVsZW1lbnQiLCJkYXRhIiwiY2FyZEVsZW1lbnQiLCJjbG9uZU5vZGUiLCJjYXJkVGl0bGUiLCJjYXJkSW1hZ2VMaW5rIiwic3JjIiwibGluayIsInNldEF0dHJpYnV0ZSIsIm5hbWUiLCJ0ZXh0Q29udGVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJ0YXJnZXQiLCJ0b2dnbGUiLCJhbHQiLCJvcGVuTW9kYWwiLCJtb2RhbCIsImNsb3NlT25Fc2NhcGUiLCJjbG9zZU9uT3ZlcmxheUNsaWNrIiwiY2xvc2VNb2RhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJjb250YWlucyIsImNoZWNrVmFsaWRpdHkiLCJwcmV2ZW50RGVmYXVsdCIsInZhbHVlIiwicHJlcGVuZCIsInJlc2V0IiwiZm9yRWFjaCIsImNhcmQiLCJhcHBlbmQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9ybUVsZW1lbnQiLCJzZXRFdmVudExpc3RlbmVycyIsIkFycmF5IiwiZnJvbSIsImNoZWNrSW5wdXRWYWxpZGl0eSIsImhpZGVJbnB1dEVycm9yIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJzaG93SW5wdXRFcnJvciIsImVycm9yTWVzc2FnZSIsInZhbGlkYXRpb25NZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==